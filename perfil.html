<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Perfil del Ni√±o</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header>
    <h1><a href="index.html">Proyecto QR - Perfil del Ni√±o</a></h1>
    <button class="toggle-theme" onclick="toggleTheme()" title="Cambiar tema">‚òÄÔ∏è / üåô</button>
  </header>

  <main>
    <div class="perfil" id="datos">
      <!-- Aqu√≠ se inyectan los datos -->
    </div>
  </main>

  <footer>
    ‚ù§Ô∏è Desarrollado por <strong><a href="https://gammadigitalstudio.com/"  target="_blank">Gama Digital Studio</a></strong>
  </footer>

  <!-- Script principal -->
  <script src="script.js" defer></script>

  <!-- L√≥gica de carga de perfil -->
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const nombre = urlParams.get("nino") || "david";

    fetch(`data/${nombre}.json`)
      .then(res => {
        if (!res.ok) throw new Error("Ni√±o no encontrado");
        return res.json();
      })
      .then(datos => {
        // Dividir notas en p√°rrafos
        const parrafosNotas = datos.notas
          .split(". ")
          .map(p => p.trim())
          .filter(p => p.length > 0);

        // Generar HTML din√°mico
        let html = `
          <h2>üö® Datos de ${datos.nombre}</h2>
          <p><strong>Edad:</strong> ${datos.edad} a√±os</p>
          <p><strong>Diagn√≥stico:</strong> ${datos.diagnostico}</p>
          <p><strong>Contacto:</strong></p>
          <ul>
            <li><strong>Nombre:</strong> ${datos.contacto.nombre}</li>
            <li><strong>Parentesco:</strong> ${datos.contacto.parentesco}</li>
            <li><strong>Tel√©fono:</strong> ${datos.contacto.telefono}</li>
          </ul>
          <p><strong>Notas:</strong></p>
        `;

        parrafosNotas.forEach(parrafo => {
          html += `<p>${parrafo}.</p>`;
        });

        document.getElementById("datos").innerHTML = html;
      })
      .catch(err => {
        document.getElementById("datos").innerHTML = "<p>Error: Ni√±o no encontrado.</p>";
        console.error("Error al cargar datos:", err);
      });
  </script>

</body>
</html>